@using PFL.Models.ViewModels
@model List<PFL.Models.ViewModels.MatchPlayerSelectionViewModel>

@{
    Layout = null;
    var clubOfficialSelection = (List<MatchOfficialSelectionViewModel>)ViewBag.MatchOfficialSelectionViewModels;
    bool isPdf = ViewBag.IsPdf;

    int youngPlayerAge21Limit = ViewBag.YoungPlayerAge21Limit;
    int youngPlayerAge19Limit = ViewBag.YoungPlayerAge19Limit;
}


@*<link href="/assets/css/bootstrap.css" rel="stylesheet" type="text/css">*@


@if (!isPdf)
{
    <div style="width: 20%; float: right">
        <div class="btn-group" style="width: 100%">
            <a href="/Club/ProtokolPdf?matchId=@(ViewBag.MatchId)&clubId=@(ViewBag.ClubId)" target="_blank" type="button" style="width: 100%" class="btn bg-primary-400 btn-labeled" data-match-id="5783"><b><i class="icon-file-text2"></i></b> <span>PDF</span></a>
        </div>
    </div>
    <br />
    <br />
}


@{
    string clubName = ViewBag.ClubName;
    List<PFL.Models.ViewModels.MatchPlayerSelectionViewModel> matchPlayerSelectionViewModels = Model;
    List<MatchOfficialSelectionViewModel> matchOfficialSelectionViewModels = clubOfficialSelection;
}




@*@ProtokolHelper.CreateView(ViewBag.ClubName, Model, clubOfficialSelection)*@




<style>
    .club-table {
        text-align: center;
        border-collapse: collapse;
        border: none;
    }

        .club-table tr {
            height: 35px
        }

    .club-official-table {
        text-align: center;
        border-collapse: collapse;
        border: none;
    }

        .club-official-table tr {
            height: 30px;
        }


    .header-number {
        width: 20pt;
        border: solid 1.0pt;
        border-top: none;
        font-size: 16px;
        color: #002060;
    }

    .header-asa {
        width: 127.45pt;
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 16px;
        color: #002060;
    }

    .header-birthdate {
        width: 54.55pt;
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 16px;
        color: #002060;
    }

    .header-s {
        width: .35in;
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 16px;
        color: #002060;
    }

    .header-e {
        width: .35in;
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 9.0pt;
        color: #002060;
    }

    .number {
        border: solid 1.0pt;
        border-top: none;
        font-size: 16px;
    }

    .asa {
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 17px;
        text-align: left;
        padding-left: 10px;
    }

    .birthdate {
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 14px;
    }

    .s {
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 17px;
    }

    .e {
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 17px;
    }

    .player-young span {
        color: #0000ff;
    }

    .player-legioner span {
        color: red;
    }

    .player-under-2000 span {
        color: green;
    }

    .header-position {
        width: 30%;
        border: solid 1.0pt;
        border-top: none;
        font-size: 16px;
        color: #002060;
        font-weight: 900;
    }

    .header-oasa {
        width: 40%;
        border: solid 1.0pt;
        font-size: 16px;
        color: #002060;
        font-weight: 900;
    }

    .header-tz {
        width: 15%;
        border: solid 1.0pt;
        font-size: 16px;
        color: #002060;
        font-weight: 900;
    }

    .header-ey {
        width: 15%;
        border: solid 1.0pt;
        font-size: 16px;
        color: #002060;
        font-weight: 900;
    }

    .position {
        border: solid 1.0pt;
        border-top: none;
        font-size: 16px;
    }

    .oasa {
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 17px;
    }

    .tz {
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 17px;
        text-align: center;
    }

    .ey {
        border-top: none;
        border-left: none;
        border-bottom: solid 1.0pt;
        border-right: solid 1.0pt;
        font-size: 17px;
    }
</style>

<style>
    .custom-checkbox-label {
        display: block;
        position: relative;
        cursor: pointer;
        font-size: 22px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }


        .custom-checkbox-label input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

    .check-mark {
        position: absolute;
        top: @(!isPdf ? "-9px": "-12px");
        left: 5px;
        height: 25px;
        width: 25px;
        background-color: #eee;
    }

    .custom-checkbox-label:hover input ~ .check-mark {
        background-color: #ccc;
    }

    .custom-checkbox-label input:checked ~ .check-mark {
        background-color: #2196F3;
    }

    .check-mark:after {
        content: "";
        position: absolute;
        display: none;
    }

    .custom-checkbox-label input:checked ~ .check-mark:after {
        display: block;
    }

    .custom-checkbox-label .check-mark:after {
        left: 9px;
        top: 5px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 3px 3px 0;
        -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
        transform: rotate(45deg);
    }

    .club-protokol-header {
        padding-top: 5px;
        padding-bottom: 5px;
        width: 94%;
        margin-left: 3%;
        height: 90px;
        position: relative;
    }

    .club-protokol-header-rotated-div {
        -moz-transform: rotate(120deg);
        -o-transform: rotate(120deg);
        -webkit-transform: rotate(120deg);
        -ms-transform: rotate(120deg);
        transform: rotate(120deg);
        background-color: white;
        height: 65px;
        width: 165px;
        margin-left: -20px;
        -ms-border-top-right-radius: 50px;
        border-top-right-radius: 100px;
    }

    .club-protokol-logo-container {
        background-color: #002060;
        height: 100%
    }

    .club-protokol-logo {
        width: 30%;
        float: left;
        margin-left: 35%;
        margin-top: 5%;
    }

    .club-protokol-club-name {
        color: #002060;
        font-size: 40px;
        font-weight: 900;
        margin-left: -25%;
    }

    .club-protokol-bottom-line {
        height: 5px;
        position: absolute;
        background-color: #002060;
        bottom: 0px;
        width: 97%;
    }
    .protokol-content {
        font-family: "Roboto", Helvetica Neue, Helvetica, Arial, sans-serif !important;
        font-size: 16px;
        line-height: 1.5384616;
        color: #333333;
        background-color: #f5f5f5;
        width: 100%;
        background: white;

    }
</style>


<div class="protokol-content">


    <div class="club-protokol-header" style="width: 94%; text-align: center; height: 90px;">

        <div class="club-protokol-logo-container" style="width: 20%; float: left; display: inline-block;">
            @*<img class="club-protokol-logo" src="/Files/Logos/qarabag_logo.png" />*@
        </div>
        <div style="background-color: #002060; height: 100%; width: 7%; float: left; display: inline-block;">
            <div class="club-protokol-header-rotated-div">
            </div>
        </div>
        <div style="width: 70%; text-align: center; float: left; display: inline-block; margin-top: 10px;">
            <span class="club-protokol-club-name">@clubName</span>
        </div>

        <div class="club-protokol-bottom-line" style="width: 100%"></div>
    </div>

    <div style="width: 94%; margin-left: 3%; background-color: #002060; color: white; padding-top: 5px; padding-bottom: 5px; text-align: center; margin-top: 25px;">
        <span style="font-size:16px;">S – start heyəti, E – ehtiyat oyunçular, K – komandanın kapitanı</span>
        <br />
        <span style="font-size: 14px;">(cəzalı, zədəli, adı siyahıda olmayan futbolçular ehtiyat skamyada otura bilməz</span>
    </div>

    <div style="width: 100%; margin-top: 20px; overflow: auto">
        <div style="width: 50%; float: left;">
            <table class="club-table" style="width: 90%; margin-left: 5%;">
                <tbody>
                    <tr>
                        <td class="text-center" style="background: #002060; color: white;" colspan="5">
                            <strong><span style="font-size: 17px;">A Komandası</span></strong>
                        </td>
                    </tr>

                    <tr>
                        <td class="header-number">№</td>

                        <td class="header-asa">Adı soyadı</td>

                        <td class="header-birthdate">Təvəllüd</td>

                        <td class="header-s">S</td>

                        <td class="header-e">E</td>
                    </tr>



                    @foreach (var item in matchPlayerSelectionViewModels.Where(x => x.ClubTypeId == 1))
                    {
                        string inputChecked = item.Selected ? "checked='checked'" : "";

                        string playerTypeClass = "";

                        if (item.CitizenshipId != 16)
                        {
                            playerTypeClass = "player-legioner";
                        }
                        if (item.PlayerBirthDate?.Year >= youngPlayerAge21Limit && item.CitizenshipId == 16)
                        {
                            playerTypeClass = "player-young";
                        }
                        if (item.PlayerBirthDate?.Year >= youngPlayerAge19Limit && item.CitizenshipId == 16)
                        {
                            playerTypeClass = "player-under-2000";
                        }

                        <tr class="@playerTypeClass">
                            <td class="number">
                                <span>@item.PlayerNumber</span>
                            </td>

                            <td class="asa ">
                                <span>@item.PlayerFirstName @item.PlayerLastName @item.PlayerFatherName @(item.PositionLabel == "Q" ? "(Q)" : "")</span>
                            </td>

                            <td class="birthdate">
                                <span>@(item.PlayerBirthDate?.ToString("dd.MM.yyyy"))</span>
                            </td>

                            <td class="s">
                                @if (item.MainStaff && item.Selected)
                                {
                                    if (item.Captain)
                                    {
                                        <span style="font-weight: 700; font-size: 20px; color:#000000">K</span>
                                    }
                                    else
                                    {
                                        <label class="custom-checkbox-label">
                                            <input type="checkbox" class="add-player" @(item.MainStaff ? @inputChecked : "") data-player-id="@item.PlayerId" data-club-type-id="1" data-main-staff="true">
                                            <span class="check-mark"></span>
                                        </label>
                                    }
                                    
                                }
                            </td>
                            <td class="e">
                                @if (!item.MainStaff && item.Selected)
                                {
                                    <label class="custom-checkbox-label">
                                        <input type="checkbox" class="add-player" @(!item.MainStaff ? @inputChecked : "") data-player-id="@item.PlayerId" data-club-type-id="1" data-main-staff="false">
                                        <span class="check-mark"></span>
                                    </label>
                                }
                            </td>
                        </tr>
                    }

                </tbody>
            </table>
        </div>
        <div style="width: 50%; float: right;">
            <table class="club-table" style="width: 90%; margin-right: 5%; float: right;">
                <tbody>
                    <tr style="height: 23pt;">
                        <td class="text-center" style="background: #002060; color: white;" colspan="5">
                            <strong><span style="font-size: 17px;">B Komandası</span></strong>
                        </td>
                    </tr>

                    <tr>
                        <td class="header-number">№</td>

                        <td class="header-asa">Adı soyadı</td>

                        <td class="header-birthdate">Təvəllüd</td>

                        <td class="header-s">S</td>

                        <td class="header-e">E</td>
                    </tr>

                    @foreach (var item in matchPlayerSelectionViewModels.Where(x => x.ClubTypeId == 2))
                    {
                        string inputChecked = item.Selected ? "checked='checked'" : "";

                        string playerTypeClass = "";

                        if (item.CitizenshipId != 16)
                        {
                            playerTypeClass = "player-legioner";
                        }
                        if (item.PlayerBirthDate?.Year >= youngPlayerAge21Limit && item.CitizenshipId == 16)
                        {
                            playerTypeClass = "player-young";
                        }
                        if (item.PlayerBirthDate?.Year >= youngPlayerAge19Limit && item.CitizenshipId == 16)
                        {
                            playerTypeClass = "player-under-2000";
                        }

                        <tr class="@playerTypeClass">
                            <td class="number">
                                <span>@item.PlayerNumber</span>
                            </td>

                            <td class="asa">
                                <span>@item.PlayerFirstName @item.PlayerLastName @item.PlayerFatherName @(item.PositionLabel == "Q" ? "(Q)" : "")</span>
                            </td>

                            <td class="birthdate">
                                <span>@(item.PlayerBirthDate?.ToString("dd.MM.yyyy"))</span>
                            </td>

                            <td class="s">
                                @if (item.MainStaff && item.Selected)
                                {
                                    if (item.Captain)
                                    {
                                        <span style="font-weight: 700; font-size: 20px; color:#000000">K</span>
                                    }
                                    else
                                    {
                                        <label class="custom-checkbox-label">
                                            <input type="checkbox" class="add-player" @(item.MainStaff ? @inputChecked : "") data-player-id="@item.PlayerId" data-club-type-id="2" data-main-staff="true">
                                            <span class="check-mark"></span>
                                        </label>
                                    }
                                }
                            </td>
                            <td class="e">
                                @if (!item.MainStaff && item.Selected)
                                {
                                    <label class="custom-checkbox-label">
                                        <input type="checkbox" class="add-player" @(!item.MainStaff ? @inputChecked : "") data-player-id="@item.PlayerId" data-club-type-id="2" data-main-staff="false">
                                        <span class="check-mark"></span>
                                    </label>
                                }
                            </td>
                        </tr>
                    }

                </tbody>
            </table>
        </div>
    </div>


    <div style="width: 100%; page-break-before: always;">

        @if (ViewBag.TournamentTypeId == 1 || (ViewBag.TournamentTypeId == 4 && matchOfficialSelectionViewModels.Count(x => x.ClubTypeId == 1)>0))
        {
            <div style="width: 94%; margin-left: 3%; margin-top: 25px;">
                <table class="club-official-table" style="width: 100%;">
                    <tbody>
                        <tr style="height: 23pt;">
                            <td class="text-center" style="background: #002060; color: white;" colspan="1">
                                <strong><span style="font-size: 16px;">A Komandasının rəsmi şəxsləri</span></strong>
                            </td>
                        </tr>

                        <tr>
                            <td class="header-position">Vəzifəsi</td>

                            <td class="header-oasa">Adı, soyadı</td>

                            <td class="header-tz">T/Z</td>

                            <td class="header-ey">Ə/Y</td>
                        </tr>

                        @foreach (var item in matchOfficialSelectionViewModels.Where(x => x.ClubTypeId == 1))
                        {
                            string inputChecked = item.Selected ? "checked='checked'" : "";

                            <tr>
                                <td class="position">@item.OfficialPositionName</td>

                                <td class="oasa">@item.OfficialFirstName @item.OfficialLastName @item.OfficialFatherName</td>

                                <td class="tz">
                                    @if (item.MatchOfficialZoneTypeId == 1 && !string.IsNullOrEmpty(@inputChecked))
                                    {
                                        <label class="custom-checkbox-label" style="margin-left: 20px;">
                                            <input type="checkbox" class="add-official" @(item.MatchOfficialZoneTypeId == 1 ? @inputChecked : "") data-official-id="@item.ClubOfficialId" data-club-type-id="1" data-zone-type-id="1">
                                            <span class="check-mark"></span>
                                        </label>
                                    }
                                </td>
                                <td class="ey">
                                    @if (item.MatchOfficialZoneTypeId == 2 && !string.IsNullOrEmpty(@inputChecked))
                                    {
                                        <label class="custom-checkbox-label" style="margin-left: 20px;">
                                            <input type="checkbox" class="add-official" @(item.MatchOfficialZoneTypeId == 2 ? @inputChecked : "") data-official-id="@item.ClubOfficialId" data-club-type-id="1" data-zone-type-id="2">
                                            <span class="check-mark"></span>
                                        </label>
                                    }
                                </td>
                            </tr>
                        }



                    </tbody>
                </table>
            </div>
        }

        @if (ViewBag.TournamentTypeId == 3 || (ViewBag.TournamentTypeId == 4 && matchOfficialSelectionViewModels.Count(x => x.ClubTypeId == 2)>0 && matchOfficialSelectionViewModels.Count(x => x.ClubTypeId == 1)==0))
        {
            <div style="width: 94%; margin-left: 3%; margin-top: 25px;">
                <table class="club-official-table" style="width: 100%;">
                    <tbody>
                        <tr style="height: 23pt;">
                            <td class="text-center" style="background: #002060; color: white;" colspan="1">
                                <strong><span style="font-size: 16px;">B Komandasının rəsmi şəxsləri</span></strong>
                            </td>
                        </tr>

                        <tr>
                            <td class="header-position">Vəzifəsi</td>

                            <td class="header-oasa">Adı, soyadı</td>

                            <td class="header-tz">T/Z</td>

                            <td class="header-ey">Ə/Y</td>
                        </tr>

                        @foreach (var item in matchOfficialSelectionViewModels.Where(x => x.ClubTypeId == 2))
                        {
                            string inputChecked = item.Selected ? "checked='checked'" : "";

                            <tr>
                                <td class="position">@item.OfficialPositionName</td>

                                <td class="oasa">@item.OfficialFirstName @item.OfficialLastName @item.OfficialFatherName</td>

                                <td class="tz">
                                    @if (item.MatchOfficialZoneTypeId == 1 && !string.IsNullOrEmpty(@inputChecked))
                                    {
                                        <label class="custom-checkbox-label" style="margin-left: 20px;">
                                            <input type="checkbox" class="add-official" @(item.MatchOfficialZoneTypeId == 1 ? @inputChecked : "") data-official-id="@item.ClubOfficialId" data-club-type-id="2" data-zone-type-id="1">
                                            <span class="check-mark"></span>
                                        </label>
                                    }
                                </td>
                                <td class="ey">
                                    @if (item.MatchOfficialZoneTypeId == 2 && !string.IsNullOrEmpty(@inputChecked))
                                    {
                                        <label class="custom-checkbox-label" style="margin-left: 20px;">
                                            <input type="checkbox" class="add-official" @(item.MatchOfficialZoneTypeId == 2 ? @inputChecked : "") data-official-id="@item.ClubOfficialId" data-club-type-id="2" data-zone-type-id="2">
                                            <span class="check-mark"></span>
                                        </label>
                                    }
                                </td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>
        }

    </div>

</div>



<script>

    $('.custom-checkbox-label input[type="checkbox"]').click(function (e) {
        e.preventDefault();
        e.stopPropagation();
    });
</script>

